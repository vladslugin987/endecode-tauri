<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="/src/styles.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ENDEcode</title>
    <script type="module" src="/src/main.ts" defer></script>
  </head>

  <body>
    <!-- Top Navigation -->
    <nav class="navbar">
      <div class="nav-brand">
        <h1 class="app-title">ENDEcode</h1>
        <span class="app-version">v2.0</span>
      </div>
      <div class="nav-controls">
        <div class="status-indicator" id="status-indicator">
          <div class="status-dot"></div>
          <span class="status-text">Ready</span>
        </div>
        <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
          <!-- Emoji will be injected by topbar.ts -->
        </button>
      </div>
    </nav>

    <!-- Main Layout -->
    <div class="layout">
      <!-- Sidebar -->
      <aside class="sidebar">
        <!-- Source Selection -->
        <section class="section">
          <header class="section-header">
            <h2 class="section-title">Workspace</h2>
          </header>
          <div class="section-content">
            <div class="action-card">
              <button type="button" class="btn btn-outline" id="select-folder-btn">
                <svg class="btn-icon" viewBox="0 0 24 24">
                  <path d="M10 4H4c-1.11 0-2 .89-2 2v12c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2h-8l-2-2z"/>
                </svg>
                Select Folder
              </button>
              
              <div class="path-display" id="selected-path">
                <div class="path-value" id="path-value">No folder selected</div>
                <button type="button" class="btn btn-ghost btn-sm" id="open-folder-btn" disabled>
                  <svg class="btn-icon" viewBox="0 0 24 24">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                    <polyline points="14,2 14,8 20,8"/>
                    <line x1="16" y1="13" x2="8" y2="13"/>
                    <line x1="16" y1="17" x2="8" y2="17"/>
                    <polyline points="10,9 9,9 8,9"/>
                  </svg>
                  Show
                </button>
              </div>
            </div>

            <!-- Quick Test -->
            <div class="action-card">
              <h3 class="card-title">Quick Test</h3>
              <form class="test-form" id="test-form">
                <div class="input-group">
                  <input type="text" id="test-input" placeholder="Test encode/decode..." class="input" />
                  <button type="submit" class="btn btn-primary">Test</button>
                </div>
        </form>
            </div>
          </div>
      </section>

        <!-- Operations -->
        <section class="section">
          <header class="section-header">
            <h2 class="section-title">Operations</h2>
          </header>
          <div class="section-content">
            <!-- Encryption Tools -->
            <div class="action-card">
              <h3 class="card-title">File Encryption</h3>
              <div class="input-group">
                <input type="text" id="inject-text" placeholder="Watermark text..." class="input" />
              </div>
              <div class="btn-group">
                <button type="button" class="btn btn-primary" id="encrypt-btn" disabled>
                  Encrypt
                </button>
                <button type="button" class="btn btn-secondary" id="decrypt-btn" disabled>
                  Decrypt
                </button>
              </div>
            </div>

            <!-- Watermark Tools -->
            <div class="action-card">
              <h3 class="card-title">Watermarks</h3>
              
              <button type="button" class="btn btn-danger" id="remove-watermarks-btn" disabled>
                Remove All Watermarks
              </button>
              
              <div class="input-row">
                <div class="input-group">
                  <label class="label">Visible Text</label>
                  <input type="text" id="visible-watermark-text" placeholder="Text..." class="input" />
                </div>
                <div class="input-group">
                  <label class="label">Photo #</label>
                  <input type="number" id="visible-watermark-photo" placeholder="All" class="input" min="1" />
                </div>
              </div>
              <button type="button" class="btn btn-secondary" id="add-visible-watermark-btn" disabled>
                Apply Visible Watermark
              </button>
            </div>

            <!-- Batch Processing -->
            <div class="action-card">
              <h3 class="card-title">Batch Processing</h3>
              <form class="batch-form" id="batch-form">
                <div class="input-row">
                  <div class="input-group">
                    <label class="label">Base Text</label>
                    <input type="text" id="batch-base-text" placeholder="Project_001" class="input" required />
                  </div>
                  <div class="input-group">
                    <label class="label">Copies</label>
                    <input type="number" id="batch-num-copies" value="1" min="1" class="input" required />
                  </div>
                </div>

                <div class="options-group">
                  <label class="option">
                    <input type="checkbox" id="batch-add-swap" class="checkbox" />
                    <span class="option-text">Number Swap (+10)</span>
                  </label>
                  <label class="option">
                    <input type="checkbox" id="batch-add-watermark" class="checkbox" />
                    <span class="option-text">Add Watermark</span>
                  </label>
                  <label class="option">
                    <input type="checkbox" id="batch-create-zip" class="checkbox" />
                    <span class="option-text">Create ZIP</span>
                  </label>
                </div>

                <div class="input-row">
                  <div class="input-group">
                    <label class="label">Watermark</label>
                    <input type="text" id="batch-watermark-text" placeholder="Optional" class="input" />
                  </div>
                  <div class="input-group">
                    <label class="label">Photo #</label>
                    <input type="number" id="batch-photo-number" placeholder="All" class="input" min="1" />
                  </div>
                </div>

                <button type="submit" class="btn btn-primary" disabled id="run-batch-btn">
                  Execute Batch
                </button>
              </form>
            </div>
          </div>
        </section>
      </aside>

      <!-- Main Content Area -->
      <main class="main-content">
        <!-- Console Panel -->
        <section class="console-panel">
          <header class="panel-header">
            <h2 class="panel-title">Console Output</h2>
            <div class="panel-controls">
              <label class="option option-sm">
                <input type="checkbox" id="auto-clear-console" class="checkbox" checked />
                <span class="option-text">Auto-clear</span>
              </label>
              <button type="button" class="btn btn-ghost btn-sm" id="clear-console-btn">
                <svg class="btn-icon" viewBox="0 0 24 24">
                  <polyline points="3,6 5,6 21,6"/>
                  <path d="m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"/>
                </svg>
                Clear
              </button>
            </div>
          </header>
          <div class="console-container">
            <div class="console-output" id="console-output"></div>
          </div>
          <div class="progress-container">
            <div class="progress-bar" id="progress-bar">
              <div class="progress-fill" id="progress-fill"></div>
            </div>
        </div>
      </section>
    </main>
    </div>
  </body>
</html>